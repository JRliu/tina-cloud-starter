const e=["类目商品列表页","page_category_product_list"],t=["商品详情页","page_product_detail"],r={"/":["首页","page_home"],"/collections/:type":e,"/category/:type":e,"/shop/:type":e,"/product/editorial/:type":e,"/search":["搜索商品列表页","page_search_product_list"],"/flashsale":["闪购商品列表页","page_flash_product_list"],"/activity/:activityType/:productType/:activityId":["活动商品列表页","page_activity_product_list"],"/activityTopic/:id":["活动专题页","page_activity_topic"],"/activityTopicApp/:id":["活动专题页","page_activity_topic_app"],"/products/:name":t,"/products":t,"/collections/:collectionName/products/:name":t,"/cart":["购物车","page_cart"],"/navigation":["类目导航页","page_category"],"/navigation/:id":["服务条款集合页","page_provision_list"],"/checkout/payment-method/:mid":["结算页","page_checkout"],"/checkout/success":["支付成功页","page_pay_succeed"],"/checkout/address/:mid":["选择地址页","page_select_address"],"/checkout/shipping-method/:mid":["物流选择页","page_shipping_method"],"/checkout/payment-card/:mid":["信用卡直连支付页","page_checkout_payment_creditcard"],"/payment/:order_id":["邮箱支付页","page_payment_email"],"/payment":["订单支付页","page_payment_order"],"/account/login":["登录注册页","page_login_register"],"/account/recover":["找回密码页","page_user_recover"],"/account/resetpassword":["重置密码页","page_user_resetpassword"],"/account/review":["评论列表页","page_account_review"],"/account/register":["注册页","page_user_register"],"/account":["个人中心页","page_user_centre"],"/account/setting":["设置页","page_user_setting"],"/account/settingcurrency":["币种选择页","page_choose_currency"],"/account/settinglanguage":["语言选择页","page_choose_language"],"/account/changepassword":["密码修改页","page_setting_password"],"/account/address":["个人中心地址簿","page_account_address"],"/account/collect":["收藏页","page_collect"],"/account/settingnav":["个人中心导航页","page_account_settingnav"],"/contact-us":["联系我们","page_contact_us"],"/checkout/address-book":["地址簿","page_user_address_book"],"/account/orderlist":["订单列表页","page_order_list"],"/account/order/:orderId":["订单详情页","page_order_detail"],"/account/coupon":["优惠券中心页","page_user_coupon"],"/account/wallet":["钱包账户页面","page_wallet"],"/account/wallet/detail":["钱包余额明细","page_wallet_detail"],"/wallet-faq":["钱包faq页面","page_wallet_faq"],"/wallet-service":["钱包政策页面","page_wallet_items"],"/account/review/:orderId/:subOrderId":["评论页","page_review"],"/returndetail/:returnOrderId":["退货退款详情页","page_return_detail"],"/return/:orderId/:subOrderId":["退货退款申请页","page_return_application"],"/order-query":["订单查询页","page_order_query"],"/products/:productId/review":["商品评论页","page_review_list"],"/blog":["blog列表页","page_blog"],"/blog-detail/:name":["blog详情页","page_blog_detail"],"/customer-reviews":["顾客评论列表","page_reviews"],"/gcr":["GCR调查问卷页","page_gcr"],"/information/:title":["服务条款页","page_information_title"],"/invitation/expired":["分享获礼过期页","page_invitation_expired"],"/invitation/overview":["分享获礼概述页","page_invitation_overview"],"/invitation/regist":["分享获礼注册页","page_invitation_regist"],"/new-product-test/:id":["新品测试页","page_newproduct_test"],"/payment-wpeur":["支付loading页","page_blog_detail"],"/seems-you-like":["邮件推荐商品落地页","page_email_recommend"],"/c/:name":["词库页","page_word_bank"]};var n=Function.prototype,o=n.bind,i=n.call,a=o&&o.bind(i),s=o?function(e){return e&&a(i,e)}:function(e){return e&&function(){return i.apply(e,arguments)}},c=Math.ceil,u=Math.floor,l=function(e){var t=+e;return t!=t||0===t?0:(t>0?u:c)(t)},p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(e){var t={exports:{}};return e(t,t.exports),t.exports}var d,h,g=function(e){return e&&e.Math==Math&&e},m=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof p&&p)||function(){return this}()||Function("return this")(),v=Object.defineProperty,y=m["__core-js_shared__"]||function(e,t){try{v(m,e,{value:t,configurable:!0,writable:!0})}catch(r){m[e]=t}return t}("__core-js_shared__",{}),_=f(function(e){(e.exports=function(e,t){return y[e]||(y[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:"pure",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})}),w=m.TypeError,b=function(e){if(null==e)throw w("Can't call method on "+e);return e},S=m.Object,O=function(e){return S(b(e))},k=s({}.hasOwnProperty),j=Object.hasOwn||function(e,t){return k(O(e),t)},I=0,P=Math.random(),x=s(1..toString),L=function(e){return"Symbol("+(void 0===e?"":e)+")_"+x(++I+P,36)},R={},A=function(e){return"function"==typeof e},E=function(e){return A(e)?e:void 0},T=function(e,t){return arguments.length<2?E(R[e])||E(m[e]):R[e]&&R[e][t]||m[e]&&m[e][t]},D=T("navigator","userAgent")||"",U=m.process,C=m.Deno,$=U&&U.versions||C&&C.version,q=$&&$.v8;q&&(h=(d=q.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!h&&D&&(!(d=D.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=D.match(/Chrome\/(\d+)/))&&(h=+d[1]);var N=h,M=function(e){try{return!!e()}catch(e){return!0}},F=!!Object.getOwnPropertySymbols&&!M(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&N&&N<41}),B=F&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,z=_("wks"),H=m.Symbol,W=H&&H.for,J=B?H:H&&H.withoutSetter||L,G=function(e){if(!j(z,e)||!F&&"string"!=typeof z[e]){var t="Symbol."+e;z[e]=F&&j(H,e)?H[e]:B&&W?W(t):J(t)}return z[e]},X={};X[G("toStringTag")]="z";var V="[object z]"===String(X),Y=s({}.toString),Q=s("".slice),K=function(e){return Q(Y(e),8,-1)},Z=G("toStringTag"),ee=m.Object,te="Arguments"==K(function(){return arguments}()),re=V?K:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=ee(e),Z))?r:te?K(t):"Object"==(n=K(t))&&A(t.callee)?"Arguments":n},ne=m.String,oe=function(e){if("Symbol"===re(e))throw TypeError("Cannot convert a Symbol value to a string");return ne(e)},ie=s("".charAt),ae=s("".charCodeAt),se=s("".slice),ce=function(e){return function(t,r){var n,o,i=oe(b(t)),a=l(r),s=i.length;return a<0||a>=s?e?"":void 0:(n=ae(i,a))<55296||n>56319||a+1===s||(o=ae(i,a+1))<56320||o>57343?e?ie(i,a):n:e?se(i,a,a+2):o-56320+(n-55296<<10)+65536}},ue={codeAt:ce(!1),charAt:ce(!0)},le=s(Function.toString);A(y.inspectSource)||(y.inspectSource=function(e){return le(e)});var pe,fe,de,he=y.inspectSource,ge=m.WeakMap,me=A(ge)&&/native code/.test(he(ge)),ve=function(e){return"object"==typeof e?null!==e:A(e)},ye=!M(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),_e=m.document,we=ve(_e)&&ve(_e.createElement),be=function(e){return we?_e.createElement(e):{}},Se=!ye&&!M(function(){return 7!=Object.defineProperty(be("div"),"a",{get:function(){return 7}}).a}),Oe=m.String,ke=m.TypeError,je=function(e){if(ve(e))return e;throw ke(Oe(e)+" is not an object")},Ie=Function.prototype.call,Pe=Ie.bind?Ie.bind(Ie):function(){return Ie.apply(Ie,arguments)},xe=s({}.isPrototypeOf),Le=m.Object,Re=B?function(e){return"symbol"==typeof e}:function(e){var t=T("Symbol");return A(t)&&xe(t.prototype,Le(e))},Ae=m.String,Ee=function(e){try{return Ae(e)}catch(e){return"Object"}},Te=m.TypeError,De=function(e){if(A(e))return e;throw Te(Ee(e)+" is not a function")},Ue=function(e,t){var r=e[t];return null==r?void 0:De(r)},Ce=m.TypeError,$e=m.TypeError,qe=G("toPrimitive"),Ne=function(e){var t=function(e,t){if(!ve(e)||Re(e))return e;var r,n=Ue(e,qe);if(n){if(void 0===t&&(t="default"),r=Pe(n,e,t),!ve(r)||Re(r))return r;throw $e("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var r,n;if("string"===t&&A(r=e.toString)&&!ve(n=Pe(r,e)))return n;if(A(r=e.valueOf)&&!ve(n=Pe(r,e)))return n;if("string"!==t&&A(r=e.toString)&&!ve(n=Pe(r,e)))return n;throw Ce("Can't convert object to primitive value")}(e,t)}(e,"string");return Re(t)?t:t+""},Me=m.TypeError,Fe=Object.defineProperty,Be={f:ye?Fe:function(e,t,r){if(je(e),t=Ne(t),je(r),Se)try{return Fe(e,t,r)}catch(e){}if("get"in r||"set"in r)throw Me("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},ze=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},He=ye?function(e,t,r){return Be.f(e,t,ze(1,r))}:function(e,t,r){return e[t]=r,e},We=_("keys"),Je=function(e){return We[e]||(We[e]=L(e))},Ge={},Xe=m.TypeError;if(me||y.state){var Ve=y.state||(y.state=new(0,m.WeakMap)),Ye=s(Ve.get),Qe=s(Ve.has),Ke=s(Ve.set);pe=function(e,t){if(Qe(Ve,e))throw new Xe("Object already initialized");return t.facade=e,Ke(Ve,e,t),t},fe=function(e){return Ye(Ve,e)||{}},de=function(e){return Qe(Ve,e)}}else{var Ze=Je("state");Ge[Ze]=!0,pe=function(e,t){if(j(e,Ze))throw new Xe("Object already initialized");return t.facade=e,He(e,Ze,t),t},fe=function(e){return j(e,Ze)?e[Ze]:{}},de=function(e){return j(e,Ze)}}var et,tt={set:pe,get:fe,has:de,enforce:function(e){return de(e)?fe(e):pe(e,{})},getterFor:function(e){return function(t){var r;if(!ve(t)||(r=fe(t)).type!==e)throw Xe("Incompatible receiver, "+e+" required");return r}}},rt=Function.prototype,nt=rt.apply,ot=rt.call,it="object"==typeof Reflect&&Reflect.apply||(rt.bind?ot.bind(nt):function(){return ot.apply(nt,arguments)}),at={}.propertyIsEnumerable,st=Object.getOwnPropertyDescriptor,ct={f:st&&!at.call({1:2},1)?function(e){var t=st(this,e);return!!t&&t.enumerable}:at},ut=m.Object,lt=s("".split),pt=M(function(){return!ut("z").propertyIsEnumerable(0)})?function(e){return"String"==K(e)?lt(e,""):ut(e)}:ut,ft=function(e){return pt(b(e))},dt=Object.getOwnPropertyDescriptor,ht={f:ye?dt:function(e,t){if(e=ft(e),t=Ne(t),Se)try{return dt(e,t)}catch(e){}if(j(e,t))return ze(!Pe(ct.f,e,t),e[t])}},gt=/#|\.prototype\./,mt=function(e,t){var r=yt[vt(e)];return r==wt||r!=_t&&(A(t)?M(t):!!t)},vt=mt.normalize=function(e){return String(e).replace(gt,".").toLowerCase()},yt=mt.data={},_t=mt.NATIVE="N",wt=mt.POLYFILL="P",bt=mt,St=s(s.bind),Ot=function(e,t){return De(e),void 0===t?e:St?St(e,t):function(){return e.apply(t,arguments)}},kt=ht.f,jt=function(e){var t=function(r,n,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,o)}return it(e,this,arguments)};return t.prototype=e.prototype,t},It=function(e,t){var r,n,o,i,a,c,u,l,p=e.target,f=e.global,d=e.stat,h=e.proto,g=f?m:d?m[p]:(m[p]||{}).prototype,v=f?R:R[p]||He(R,p,{})[p],y=v.prototype;for(o in t)r=!bt(f?o:p+(d?".":"#")+o,e.forced)&&g&&j(g,o),a=v[o],r&&(c=e.noTargetGet?(l=kt(g,o))&&l.value:g[o]),i=r&&c?c:t[o],r&&typeof a==typeof i||(u=e.bind&&r?Ot(i,m):e.wrap&&r?jt(i):h&&A(i)?s(i):i,(e.sham||i&&i.sham||a&&a.sham)&&He(u,"sham",!0),He(v,o,u),h&&(j(R,n=p+"Prototype")||He(R,n,{}),He(R[n],o,i),e.real&&y&&!y[o]&&He(y,o,i)))},Pt=Function.prototype,xt=ye&&Object.getOwnPropertyDescriptor,Lt=j(Pt,"name"),Rt={EXISTS:Lt,PROPER:Lt&&"something"===function(){}.name,CONFIGURABLE:Lt&&(!ye||ye&&xt(Pt,"name").configurable)},At=Math.max,Et=Math.min,Tt=function(e,t){var r=l(e);return r<0?At(r+t,0):Et(r,t)},Dt=Math.min,Ut=function(e){return(t=e.length)>0?Dt(l(t),9007199254740991):0;var t},Ct=function(e){return function(t,r,n){var o,i=ft(t),a=Ut(i),s=Tt(n,a);if(e&&r!=r){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===r)return e||s||0;return!e&&-1}},$t=(Ct(!0),Ct(!1)),qt=s([].push),Nt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Mt=Object.keys||function(e){return function(e,t){var r,n=ft(e),o=0,i=[];for(r in n)!j(Ge,r)&&j(n,r)&&qt(i,r);for(;t.length>o;)j(n,r=t[o++])&&(~$t(i,r)||qt(i,r));return i}(e,Nt)},Ft=ye?Object.defineProperties:function(e,t){je(e);for(var r,n=ft(t),o=Mt(t),i=o.length,a=0;i>a;)Be.f(e,r=o[a++],n[r]);return e},Bt=T("document","documentElement"),zt=Je("IE_PROTO"),Ht=function(){},Wt=function(e){return"<script>"+e+"<\/script>"},Jt=function(e){e.write(Wt("")),e.close();var t=e.parentWindow.Object;return e=null,t},Gt=function(){try{et=new ActiveXObject("htmlfile")}catch(e){}var e,t;Gt="undefined"!=typeof document?document.domain&&et?Jt(et):((t=be("iframe")).style.display="none",Bt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Wt("document.F=Object")),e.close(),e.F):Jt(et);for(var r=Nt.length;r--;)delete Gt.prototype[Nt[r]];return Gt()};Ge[zt]=!0;var Xt,Vt,Yt,Qt=Object.create||function(e,t){var r;return null!==e?(Ht.prototype=je(e),r=new Ht,Ht.prototype=null,r[zt]=e):r=Gt(),void 0===t?r:Ft(r,t)},Kt=!M(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Zt=Je("IE_PROTO"),er=m.Object,tr=er.prototype,rr=Kt?er.getPrototypeOf:function(e){var t=O(e);if(j(t,Zt))return t[Zt];var r=t.constructor;return A(r)&&t instanceof r?r.prototype:t instanceof er?tr:null},nr=function(e,t,r,n){n&&n.enumerable?e[t]=r:He(e,t,r)},or=G("iterator"),ir=!1;[].keys&&("next"in(Yt=[].keys())?(Vt=rr(rr(Yt)))!==Object.prototype&&(Xt=Vt):ir=!0);var ar=null==Xt||M(function(){var e={};return Xt[or].call(e)!==e});Xt=ar?{}:Qt(Xt),A(Xt[or])||nr(Xt,or,function(){return this});var sr={IteratorPrototype:Xt,BUGGY_SAFARI_ITERATORS:ir},cr=V?{}.toString:function(){return"[object "+re(this)+"]"},ur=Be.f,lr=G("toStringTag"),pr=function(e,t,r,n){if(e){var o=r?e:e.prototype;j(o,lr)||ur(o,lr,{configurable:!0,value:t}),n&&!V&&He(o,"toString",cr)}},fr={},dr=sr.IteratorPrototype,hr=function(){return this},gr=function(e,t,r,n){var o=t+" Iterator";return e.prototype=Qt(dr,{next:ze(+!n,r)}),pr(e,o,!1,!0),fr[o]=hr,e};Object.setPrototypeOf||"__proto__"in{}&&function(){try{s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set)({},[])}catch(e){}}();var mr=Rt.PROPER,vr=sr.BUGGY_SAFARI_ITERATORS,yr=G("iterator"),_r=function(){return this},wr=function(e,t,r,n,o,i,a){gr(r,t,n);var s,c,u,l=function(e){if(e===o&&g)return g;if(!vr&&e in d)return d[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},p=t+" Iterator",f=!1,d=e.prototype,h=d[yr]||d["@@iterator"]||o&&d[o],g=!vr&&h||l(o),m="Array"==t&&d.entries||h;if(m&&(s=rr(m.call(new e)))!==Object.prototype&&s.next&&(pr(s,p,!0,!0),fr[p]=_r),mr&&"values"==o&&h&&"values"!==h.name&&(f=!0,g=function(){return Pe(h,this)}),o)if(c={values:l("values"),keys:i?g:l("keys"),entries:l("entries")},a)for(u in c)(vr||f||!(u in d))&&nr(d,u,c[u]);else It({target:t,proto:!0,forced:vr||f},c);return a&&d[yr]!==g&&nr(d,yr,g,{name:o}),fr[t]=g,c},br=ue.charAt,Sr=tt.set,Or=tt.getterFor("String Iterator");wr(String,"String",function(e){Sr(this,{type:"String Iterator",string:oe(e),index:0})},function(){var e,t=Or(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=br(r,n),t.index+=e.length,{value:e,done:!1})});var kr=G("iterator"),jr=!M(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach(function(e,n){t.delete("b"),r+=n+e}),!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[kr]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}),Ir=m.TypeError,Pr=function(e,t){if(xe(t,e))return e;throw Ir("Incorrect invocation")},xr={f:Object.getOwnPropertySymbols},Lr=Object.assign,Rr=Object.defineProperty,Ar=s([].concat),Er=!Lr||M(function(){if(ye&&1!==Lr({b:1},Lr(Rr({},"a",{enumerable:!0,get:function(){Rr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=Lr({},e)[r]||Mt(Lr({},t)).join("")!=n})?function(e,t){for(var r=O(e),n=arguments.length,o=1,i=xr.f,a=ct.f;n>o;)for(var s,c=pt(arguments[o++]),u=i?Ar(Mt(c),i(c)):Mt(c),l=u.length,p=0;l>p;)s=u[p++],ye&&!Pe(a,c,s)||(r[s]=c[s]);return r}:Lr,Tr=function(e,t,r,n){try{return n?t(je(r)[0],r[1]):t(r)}catch(t){!function(e,t,r){var n;je(e);try{if(!(n=Ue(e,"return")))throw r;n=Pe(n,e)}catch(e){n=e}throw r}(e,0,t)}},Dr=G("iterator"),Ur=Array.prototype,Cr=function(e){return void 0!==e&&(fr.Array===e||Ur[Dr]===e)},$r=function(){},qr=[],Nr=T("Reflect","construct"),Mr=/^\s*(?:class|function)\b/,Fr=s(Mr.exec),Br=!Mr.exec($r),zr=function(e){if(!A(e))return!1;try{return Nr($r,qr,e),!0}catch(e){return!1}},Hr=!Nr||M(function(){var e;return zr(zr.call)||!zr(Object)||!zr(function(){e=!0})||e})?function(e){if(!A(e))return!1;switch(re(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Br||!!Fr(Mr,he(e))}:zr,Wr=function(e,t,r){var n=Ne(t);n in e?Be.f(e,n,ze(0,r)):e[n]=r},Jr=G("iterator"),Gr=function(e){if(null!=e)return Ue(e,Jr)||Ue(e,"@@iterator")||fr[re(e)]},Xr=m.TypeError,Vr=function(e,t){var r=arguments.length<2?Gr(e):t;if(De(r))return je(Pe(r,e));throw Xr(Ee(e)+" is not iterable")},Yr=m.Array,Qr=function(e){var t=O(e),r=Hr(this),n=arguments.length,o=n>1?arguments[1]:void 0,i=void 0!==o;i&&(o=Ot(o,n>2?arguments[2]:void 0));var a,s,c,u,l,p,f=Gr(t),d=0;if(!f||this==Yr&&Cr(f))for(a=Ut(t),s=r?new this(a):Yr(a);a>d;d++)p=i?o(t[d],d):t[d],Wr(s,d,p);else for(l=(u=Vr(t,f)).next,s=r?new this:[];!(c=Pe(l,u)).done;d++)p=i?Tr(u,o,[c.value,d],!0):c.value,Wr(s,d,p);return s.length=d,s},Kr=m.Array,Zr=Math.max,en=function(e,t,r){for(var n=Ut(e),o=Tt(t,n),i=Tt(void 0===r?n:r,n),a=Kr(Zr(i-o,0)),s=0;o<i;o++,s++)Wr(a,s,e[o]);return a.length=s,a},tn=/[^\0-\u007E]/,rn=/[.\u3002\uFF0E\uFF61]/g,nn="Overflow: input needs wider integers to process",on=m.RangeError,an=s(rn.exec),sn=Math.floor,cn=String.fromCharCode,un=s("".charCodeAt),ln=s([].join),pn=s([].push),fn=s("".replace),dn=s("".split),hn=s("".toLowerCase),gn=function(e){return e+22+75*(e<26)},mn=function(e,t,r){var n=0;for(e=r?sn(e/700):e>>1,e+=sn(e/t);e>455;)e=sn(e/35),n+=36;return sn(n+36*e/(e+38))},vn=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=un(e,r++);if(o>=55296&&o<=56319&&r<n){var i=un(e,r++);56320==(64512&i)?pn(t,((1023&o)<<10)+(1023&i)+65536):(pn(t,o),r--)}else pn(t,o)}return t}(e);var r,n,o=e.length,i=128,a=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&pn(t,cn(n));var c=t.length,u=c;for(c&&pn(t,"-");u<o;){var l=2147483647;for(r=0;r<e.length;r++)(n=e[r])>=i&&n<l&&(l=n);var p=u+1;if(l-i>sn((2147483647-a)/p))throw on(nn);for(a+=(l-i)*p,i=l,r=0;r<e.length;r++){if((n=e[r])<i&&++a>2147483647)throw on(nn);if(n==i){for(var f=a,d=36;;){var h=d<=s?1:d>=s+26?26:d-s;if(f<h)break;var g=f-h,m=36-h;pn(t,cn(gn(h+g%m))),f=sn(g/m),d+=36}pn(t,cn(gn(f))),s=mn(a,p,u==c),a=0,u++}}a++,i++}return ln(t,"")},yn=tt.set,_n=tt.getterFor("Array Iterator");wr(Array,"Array",function(e,t){yn(this,{type:"Array Iterator",target:ft(e),index:0,kind:t})},function(){var e=_n(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values"),fr.Arguments=fr.Array;var wn=Math.floor,bn=function(e,t){var r=e.length,n=wn(r/2);return r<8?Sn(e,t):On(e,bn(en(e,0,n),t),bn(en(e,n),t),t)},Sn=function(e,t){for(var r,n,o=e.length,i=1;i<o;){for(n=i,r=e[i];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==i++&&(e[n]=r)}return e},On=function(e,t,r,n){for(var o=t.length,i=r.length,a=0,s=0;a<o||s<i;)e[a+s]=a<o&&s<i?n(t[a],r[s])<=0?t[a++]:r[s++]:a<o?t[a++]:r[s++];return e},kn=bn,jn=G("iterator"),In=tt.set,Pn=tt.getterFor("URLSearchParams"),xn=tt.getterFor("URLSearchParamsIterator"),Ln=T("fetch"),Rn=T("Request"),An=T("Headers"),En=Rn&&Rn.prototype,Tn=An&&An.prototype,Dn=m.RegExp,Un=m.TypeError,Cn=m.decodeURIComponent,$n=m.encodeURIComponent,qn=s("".charAt),Nn=s([].join),Mn=s([].push),Fn=s("".replace),Bn=s([].shift),zn=s([].splice),Hn=s("".split),Wn=s("".slice),Jn=/\+/g,Gn=Array(4),Xn=function(e){return Gn[e-1]||(Gn[e-1]=Dn("((?:%[\\da-f]{2}){"+e+"})","gi"))},Vn=function(e){try{return Cn(e)}catch(t){return e}},Yn=function(e){var t=Fn(e,Jn," "),r=4;try{return Cn(t)}catch(e){for(;r;)t=Fn(t,Xn(r--),Vn);return t}},Qn=/[!'()~]|%20/g,Kn={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Zn=function(e){return Kn[e]},eo=function(e){return Fn($n(e),Qn,Zn)},to=function(e,t){if(e<t)throw Un("Not enough arguments")},ro=gr(function(e,t){In(this,{type:"URLSearchParamsIterator",iterator:Vr(Pn(e).entries),kind:t})},"Iterator",function(){var e=xn(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r},!0),no=function(e){this.entries=[],this.url=null,void 0!==e&&(ve(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===qn(e,0)?Wn(e,1):e:oe(e)))};no.prototype={type:"URLSearchParams",bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,o,i,a,s,c=Gr(e);if(c)for(r=(t=Vr(e,c)).next;!(n=Pe(r,t)).done;){if(o=Vr(je(n.value)),(a=Pe(i=o.next,o)).done||(s=Pe(i,o)).done||!Pe(i,o).done)throw Un("Expected sequence with length 2");Mn(this.entries,{key:oe(a.value),value:oe(s.value)})}else for(var u in e)j(e,u)&&Mn(this.entries,{key:u,value:oe(e[u])})},parseQuery:function(e){if(e)for(var t,r,n=Hn(e,"&"),o=0;o<n.length;)(t=n[o++]).length&&(r=Hn(t,"="),Mn(this.entries,{key:Yn(Bn(r)),value:Yn(Nn(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)e=t[n++],Mn(r,eo(e.key)+"="+eo(e.value));return Nn(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var oo=function(){Pr(this,io);var e=arguments.length>0?arguments[0]:void 0;In(this,new no(e))},io=oo.prototype;if(function(e,t,r){for(var n in t)r&&r.unsafe&&e[n]?e[n]=t[n]:nr(e,n,t[n],r)}(io,{append:function(e,t){to(arguments.length,2);var r=Pn(this);Mn(r.entries,{key:oe(e),value:oe(t)}),r.updateURL()},delete:function(e){to(arguments.length,1);for(var t=Pn(this),r=t.entries,n=oe(e),o=0;o<r.length;)r[o].key===n?zn(r,o,1):o++;t.updateURL()},get:function(e){to(arguments.length,1);for(var t=Pn(this).entries,r=oe(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){to(arguments.length,1);for(var t=Pn(this).entries,r=oe(e),n=[],o=0;o<t.length;o++)t[o].key===r&&Mn(n,t[o].value);return n},has:function(e){to(arguments.length,1);for(var t=Pn(this).entries,r=oe(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){to(arguments.length,1);for(var r,n=Pn(this),o=n.entries,i=!1,a=oe(e),s=oe(t),c=0;c<o.length;c++)(r=o[c]).key===a&&(i?zn(o,c--,1):(i=!0,r.value=s));i||Mn(o,{key:a,value:s}),n.updateURL()},sort:function(){var e=Pn(this);kn(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=Pn(this).entries,n=Ot(e,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((t=r[o++]).value,t.key,this)},keys:function(){return new ro(this,"keys")},values:function(){return new ro(this,"values")},entries:function(){return new ro(this,"entries")}},{enumerable:!0}),nr(io,jn,io.entries,{name:"entries"}),nr(io,"toString",function(){return Pn(this).serialize()},{enumerable:!0}),pr(oo,"URLSearchParams"),It({global:!0,forced:!jr},{URLSearchParams:oo}),!jr&&A(An)){var ao=s(Tn.has),so=s(Tn.set),co=function(e){if(ve(e)){var t,r=e.body;if("URLSearchParams"===re(r))return t=e.headers?new An(e.headers):new An,ao(t,"content-type")||so(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Qt(e,{body:ze(0,oe(r)),headers:ze(0,t)})}return e};if(A(Ln)&&It({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Ln(e,arguments.length>1?co(arguments[1]):{})}}),A(Rn)){var uo=function(e){return Pr(this,En),new Rn(e,arguments.length>1?co(arguments[1]):{})};En.constructor=uo,uo.prototype=En,It({global:!0,forced:!0},{Request:uo})}}var lo,po={URLSearchParams:oo,getState:Pn},fo=ue.codeAt,ho=tt.set,go=tt.getterFor("URL"),mo=po.URLSearchParams,vo=po.getState,yo=m.URL,_o=m.TypeError,wo=m.parseInt,bo=Math.floor,So=Math.pow,Oo=s("".charAt),ko=s(/./.exec),jo=s([].join),Io=s(1..toString),Po=s([].pop),xo=s([].push),Lo=s("".replace),Ro=s([].shift),Ao=s("".split),Eo=s("".slice),To=s("".toLowerCase),Do=s([].unshift),Uo=/[a-z]/i,Co=/[\d+-.a-z]/i,$o=/\d/,qo=/^0x/i,No=/^[0-7]+$/,Mo=/^\d+$/,Fo=/^[\da-f]+$/i,Bo=/[\0\t\n\r #%/:<>?@[\\\]^|]/,zo=/[\0\t\n\r #/:<>?@[\\\]^|]/,Ho=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Wo=/[\t\n\r]/g,Jo=function(e){var t,r,n,o;if("number"==typeof e){for(t=[],r=0;r<4;r++)Do(t,e%256),e=bo(e/256);return jo(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>r&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r&&(t=n,r=o),t}(e),r=0;r<8;r++)o&&0===e[r]||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=Io(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},Go={},Xo=Er({},Go,{" ":1,'"':1,"<":1,">":1,"`":1}),Vo=Er({},Xo,{"#":1,"?":1,"{":1,"}":1}),Yo=Er({},Vo,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Qo=function(e,t){var r=fo(e,0);return r>32&&r<127&&!j(t,e)?e:encodeURIComponent(e)},Ko={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Zo=function(e,t){var r;return 2==e.length&&ko(Uo,Oo(e,0))&&(":"==(r=Oo(e,1))||!t&&"|"==r)},ei=function(e){var t;return e.length>1&&Zo(Eo(e,0,2))&&(2==e.length||"/"===(t=Oo(e,2))||"\\"===t||"?"===t||"#"===t)},ti=function(e){return"."===e||"%2e"===To(e)},ri={},ni={},oi={},ii={},ai={},si={},ci={},ui={},li={},pi={},fi={},di={},hi={},gi={},mi={},vi={},yi={},_i={},wi={},bi={},Si={},Oi=function(e,t,r){var n,o,i,a=oe(e);if(t){if(o=this.parse(a))throw _o(o);this.searchParams=null}else{if(void 0!==r&&(n=new Oi(r,!0)),o=this.parse(a,null,n))throw _o(o);(i=vo(new mo)).bindURL(this),this.searchParams=i}};Oi.prototype={type:"URL",parse:function(e,t,r){var n,o,i,a,s,c=this,u=t||ri,l=0,p="",f=!1,d=!1,h=!1;for(e=oe(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=Lo(e,Ho,"")),e=Lo(e,Wo,""),n=Qr(e);l<=n.length;){switch(o=n[l],u){case ri:if(!o||!ko(Uo,o)){if(t)return"Invalid scheme";u=oi;continue}p+=To(o),u=ni;break;case ni:if(o&&(ko(Co,o)||"+"==o||"-"==o||"."==o))p+=To(o);else{if(":"!=o){if(t)return"Invalid scheme";p="",u=oi,l=0;continue}if(t&&(c.isSpecial()!=j(Ko,p)||"file"==p&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=p,t)return void(c.isSpecial()&&Ko[c.scheme]==c.port&&(c.port=null));p="","file"==c.scheme?u=gi:c.isSpecial()&&r&&r.scheme==c.scheme?u=ii:c.isSpecial()?u=ui:"/"==n[l+1]?(u=ai,l++):(c.cannotBeABaseURL=!0,xo(c.path,""),u=wi)}break;case oi:if(!r||r.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==o){c.scheme=r.scheme,c.path=en(r.path),c.query=r.query,c.fragment="",c.cannotBeABaseURL=!0,u=Si;break}u="file"==r.scheme?gi:si;continue;case ii:if("/"!=o||"/"!=n[l+1]){u=si;continue}u=li,l++;break;case ai:if("/"==o){u=pi;break}u=_i;continue;case si:if(c.scheme=r.scheme,o==lo)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=en(r.path),c.query=r.query;else if("/"==o||"\\"==o&&c.isSpecial())u=ci;else if("?"==o)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=en(r.path),c.query="",u=bi;else{if("#"!=o){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=en(r.path),c.path.length--,u=_i;continue}c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=en(r.path),c.query=r.query,c.fragment="",u=Si}break;case ci:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,u=_i;continue}u=pi}else u=li;break;case ui:if(u=li,"/"!=o||"/"!=Oo(p,l+1))continue;l++;break;case li:if("/"!=o&&"\\"!=o){u=pi;continue}break;case pi:if("@"==o){f&&(p="%40"+p),f=!0,i=Qr(p);for(var g=0;g<i.length;g++){var m=i[g];if(":"!=m||h){var v=Qo(m,Yo);h?c.password+=v:c.username+=v}else h=!0}p=""}else if(o==lo||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(f&&""==p)return"Invalid authority";l-=Qr(p).length+1,p="",u=fi}else p+=o;break;case fi:case di:if(t&&"file"==c.scheme){u=vi;continue}if(":"!=o||d){if(o==lo||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==p)return"Invalid host";if(t&&""==p&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(p))return a;if(p="",u=yi,t)return;continue}"["==o?d=!0:"]"==o&&(d=!1),p+=o}else{if(""==p)return"Invalid host";if(a=c.parseHost(p))return a;if(p="",u=hi,t==di)return}break;case hi:if(!ko($o,o)){if(o==lo||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||t){if(""!=p){var y=wo(p,10);if(y>65535)return"Invalid port";c.port=c.isSpecial()&&y===Ko[c.scheme]?null:y,p=""}if(t)return;u=yi;continue}return"Invalid port"}p+=o;break;case gi:if(c.scheme="file","/"==o||"\\"==o)u=mi;else{if(!r||"file"!=r.scheme){u=_i;continue}if(o==lo)c.host=r.host,c.path=en(r.path),c.query=r.query;else if("?"==o)c.host=r.host,c.path=en(r.path),c.query="",u=bi;else{if("#"!=o){ei(jo(en(n,l),""))||(c.host=r.host,c.path=en(r.path),c.shortenPath()),u=_i;continue}c.host=r.host,c.path=en(r.path),c.query=r.query,c.fragment="",u=Si}}break;case mi:if("/"==o||"\\"==o){u=vi;break}r&&"file"==r.scheme&&!ei(jo(en(n,l),""))&&(Zo(r.path[0],!0)?xo(c.path,r.path[0]):c.host=r.host),u=_i;continue;case vi:if(o==lo||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&Zo(p))u=_i;else if(""==p){if(c.host="",t)return;u=yi}else{if(a=c.parseHost(p))return a;if("localhost"==c.host&&(c.host=""),t)return;p="",u=yi}continue}p+=o;break;case yi:if(c.isSpecial()){if(u=_i,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=lo&&(u=_i,"/"!=o))continue}else c.fragment="",u=Si;else c.query="",u=bi;break;case _i:if(o==lo||"/"==o||"\\"==o&&c.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(s=To(s=p))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==o||"\\"==o&&c.isSpecial()||xo(c.path,"")):ti(p)?"/"==o||"\\"==o&&c.isSpecial()||xo(c.path,""):("file"==c.scheme&&!c.path.length&&Zo(p)&&(c.host&&(c.host=""),p=Oo(p,0)+":"),xo(c.path,p)),p="","file"==c.scheme&&(o==lo||"?"==o||"#"==o))for(;c.path.length>1&&""===c.path[0];)Ro(c.path);"?"==o?(c.query="",u=bi):"#"==o&&(c.fragment="",u=Si)}else p+=Qo(o,Vo);break;case wi:"?"==o?(c.query="",u=bi):"#"==o?(c.fragment="",u=Si):o!=lo&&(c.path[0]+=Qo(o,Go));break;case bi:t||"#"!=o?o!=lo&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":Qo(o,Go)):(c.fragment="",u=Si);break;case Si:o!=lo&&(c.fragment+=Qo(o,Xo))}l++}},parseHost:function(e){var t,r,n;if("["==Oo(e,0)){if("]"!=Oo(e,e.length-1))return"Invalid host";if(t=function(e){var t,r,n,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,p=0,f=function(){return Oo(e,p)};if(":"==f()){if(":"!=Oo(e,1))return;p+=2,l=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=r=0;r<4&&ko(Fo,f());)t=16*t+wo(f(),16),p++,r++;if("."==f()){if(0==r)return;if(p-=r,u>6)return;for(n=0;f();){if(o=null,n>0){if(!("."==f()&&n<4))return;p++}if(!ko($o,f()))return;for(;ko($o,f());){if(i=wo(f(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;p++}c[u]=256*c[u]+o,2!=++n&&4!=n||u++}if(4!=n)return;break}if(":"==f()){if(p++,!f())return}else if(f())return;c[u++]=t}else{if(null!==l)return;p++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c}(Eo(e,1,-1)),!t)return"Invalid host";this.host=t}else if(this.isSpecial()){if(e=function(e){var t,r,n=[],o=dn(fn(hn(e),rn,"."),".");for(t=0;t<o.length;t++)pn(n,an(tn,r=o[t])?"xn--"+vn(r):r);return ln(n,".")}(e),ko(Bo,e))return"Invalid host";if(t=function(e){var t,r,n,o,i,a,s,c=Ao(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(o=c[n]))return e;if(i=10,o.length>1&&"0"==Oo(o,0)&&(i=ko(qo,o)?16:8,o=Eo(o,8==i?1:2)),""===o)a=0;else{if(!ko(10==i?Mo:8==i?No:Fo,o))return e;a=wo(o,i)}xo(r,a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=So(256,5-t))return null}else if(a>255)return null;for(s=Po(r),n=0;n<r.length;n++)s+=r[n]*So(256,3-n);return s}(e),null===t)return"Invalid host";this.host=t}else{if(ko(zo,e))return"Invalid host";for(t="",r=Qr(e),n=0;n<r.length;n++)t+=Qo(r[n],Go);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return j(Ko,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&Zo(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==o?(u+="//",e.includesCredentials()&&(u+=r+(n?":"+n:"")+"@"),u+=Jo(o),null!==i&&(u+=":"+i)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+jo(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw _o(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new ki(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+Jo(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(oe(e)+":",ri)},getUsername:function(){return this.username},setUsername:function(e){var t=Qr(oe(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Qo(t[r],Yo)}},getPassword:function(){return this.password},setPassword:function(e){var t=Qr(oe(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Qo(t[r],Yo)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Jo(e):Jo(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,fi)},getHostname:function(){var e=this.host;return null===e?"":Jo(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,di)},getPort:function(){var e=this.port;return null===e?"":oe(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=oe(e))?this.port=null:this.parse(e,hi))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+jo(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,yi))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=oe(e))?this.query=null:("?"==Oo(e,0)&&(e=Eo(e,1)),this.query="",this.parse(e,bi)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=oe(e))?("#"==Oo(e,0)&&(e=Eo(e,1)),this.fragment="",this.parse(e,Si)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ki=function(e){var t=Pr(this,ji),r=arguments.length>1?arguments[1]:void 0,n=ho(t,new Oi(e,!1,r));ye||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},ji=ki.prototype,Ii=function(e,t){return{get:function(){return go(this)[e]()},set:t&&function(e){return go(this)[t](e)},configurable:!0,enumerable:!0}};if(ye&&Ft(ji,{href:Ii("serialize","setHref"),origin:Ii("getOrigin"),protocol:Ii("getProtocol","setProtocol"),username:Ii("getUsername","setUsername"),password:Ii("getPassword","setPassword"),host:Ii("getHost","setHost"),hostname:Ii("getHostname","setHostname"),port:Ii("getPort","setPort"),pathname:Ii("getPathname","setPathname"),search:Ii("getSearch","setSearch"),searchParams:Ii("getSearchParams"),hash:Ii("getHash","setHash")}),nr(ji,"toJSON",function(){return go(this).serialize()},{enumerable:!0}),nr(ji,"toString",function(){return go(this).serialize()},{enumerable:!0}),yo){var Pi=yo.createObjectURL,xi=yo.revokeObjectURL;Pi&&nr(ki,"createObjectURL",Ot(Pi,yo)),xi&&nr(ki,"revokeObjectURL",Ot(xi,yo))}pr(ki,"URL"),It({global:!0,forced:!jr,sham:!ye},{URL:ki});var Li=R.URL;function Ri(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var Ai=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=Ri({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=t.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",Ri({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Ri({},this.attributes,t))},withConverter:function(t){return e(Ri({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const Ei="mirage_cid",Ti="mirage_sid";var Di,Ui,Ci=function(e){return e&&e.Math==Math&&e},$i=Ci("object"==typeof globalThis&&globalThis)||Ci("object"==typeof window&&window)||Ci("object"==typeof self&&self)||Ci("object"==typeof p&&p)||function(){return this}()||Function("return this")(),qi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ni=function(e){return"function"==typeof e},Mi=function(e){return"object"==typeof e?null!==e:Ni(e)},Fi=$i.document,Bi=Mi(Fi)&&Mi(Fi.createElement),zi=function(e){return Bi?Fi.createElement(e):{}},Hi=zi("span").classList,Wi=Hi&&Hi.constructor&&Hi.constructor.prototype,Ji=Wi===Object.prototype?void 0:Wi,Gi=Function.prototype,Xi=Gi.bind,Vi=Gi.call,Yi=Xi&&Xi.bind(Vi),Qi=Xi?function(e){return e&&Yi(Vi,e)}:function(e){return e&&function(){return Vi.apply(e,arguments)}},Ki=function(e){try{return!!e()}catch(e){return!0}},Zi=Qi({}.toString),ea=Qi("".slice),ta=$i.Object,ra=Qi("".split),na=Ki(function(){return!ta("z").propertyIsEnumerable(0)})?function(e){return"String"==function(e){return ea(Zi(e),8,-1)}(e)?ra(e,""):ta(e)}:ta,oa=$i.TypeError,ia=function(e){if(null==e)throw oa("Can't call method on "+e);return e},aa=function(e){return na(ia(e))},sa=Object.defineProperty,ca=function(e,t){try{sa($i,e,{value:t,configurable:!0,writable:!0})}catch(r){$i[e]=t}return t},ua=$i["__core-js_shared__"]||ca("__core-js_shared__",{}),la=f(function(e){(e.exports=function(e,t){return ua[e]||(ua[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})}),pa=$i.Object,fa=function(e){return pa(ia(e))},da=Qi({}.hasOwnProperty),ha=Object.hasOwn||function(e,t){return da(fa(e),t)},ga=0,ma=Math.random(),va=Qi(1..toString),ya=function(e){return"Symbol("+(void 0===e?"":e)+")_"+va(++ga+ma,36)},_a=function(e){return Ni(e)?e:void 0},wa=function(e,t){return arguments.length<2?_a($i[e]):$i[e]&&$i[e][t]},ba=wa("navigator","userAgent")||"",Sa=$i.process,Oa=$i.Deno,ka=Sa&&Sa.versions||Oa&&Oa.version,ja=ka&&ka.v8;ja&&(Ui=(Di=ja.split("."))[0]>0&&Di[0]<4?1:+(Di[0]+Di[1])),!Ui&&ba&&(!(Di=ba.match(/Edge\/(\d+)/))||Di[1]>=74)&&(Di=ba.match(/Chrome\/(\d+)/))&&(Ui=+Di[1]);var Ia,Pa=Ui,xa=!!Object.getOwnPropertySymbols&&!Ki(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Pa&&Pa<41}),La=xa&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ra=la("wks"),Aa=$i.Symbol,Ea=Aa&&Aa.for,Ta=La?Aa:Aa&&Aa.withoutSetter||ya,Da=function(e){if(!ha(Ra,e)||!xa&&"string"!=typeof Ra[e]){var t="Symbol."+e;Ra[e]=xa&&ha(Aa,e)?Aa[e]:La&&Ea?Ea(t):Ta(t)}return Ra[e]},Ua=$i.String,Ca=$i.TypeError,$a=function(e){if(Mi(e))return e;throw Ca(Ua(e)+" is not an object")},qa=!Ki(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Na=!qa&&!Ki(function(){return 7!=Object.defineProperty(zi("div"),"a",{get:function(){return 7}}).a}),Ma=Function.prototype.call,Fa=Ma.bind?Ma.bind(Ma):function(){return Ma.apply(Ma,arguments)},Ba=Qi({}.isPrototypeOf),za=$i.Object,Ha=La?function(e){return"symbol"==typeof e}:function(e){var t=wa("Symbol");return Ni(t)&&Ba(t.prototype,za(e))},Wa=$i.String,Ja=$i.TypeError,Ga=$i.TypeError,Xa=$i.TypeError,Va=Da("toPrimitive"),Ya=function(e){var t=function(e,t){if(!Mi(e)||Ha(e))return e;var r,n,o=null==(r=e[Va])?void 0:function(e){if(Ni(e))return e;throw Ja(function(e){try{return Wa(e)}catch(e){return"Object"}}(e)+" is not a function")}(r);if(o){if(void 0===t&&(t="default"),n=Fa(o,e,t),!Mi(n)||Ha(n))return n;throw Xa("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var r,n;if("string"===t&&Ni(r=e.toString)&&!Mi(n=Fa(r,e)))return n;if(Ni(r=e.valueOf)&&!Mi(n=Fa(r,e)))return n;if("string"!==t&&Ni(r=e.toString)&&!Mi(n=Fa(r,e)))return n;throw Ga("Can't convert object to primitive value")}(e,t)}(e,"string");return Ha(t)?t:t+""},Qa=$i.TypeError,Ka=Object.defineProperty,Za={f:qa?Ka:function(e,t,r){if($a(e),t=Ya(t),$a(r),Na)try{return Ka(e,t,r)}catch(e){}if("get"in r||"set"in r)throw Qa("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},es=Math.ceil,ts=Math.floor,rs=function(e){var t=+e;return t!=t||0===t?0:(t>0?ts:es)(t)},ns=Math.max,os=Math.min,is=Math.min,as=function(e){return function(t,r,n){var o,i,a=aa(t),s=(i=a.length)>0?is(rs(i),9007199254740991):0,c=function(e,t){var r=rs(e);return r<0?ns(r+t,0):os(r,t)}(n,s);if(e&&r!=r){for(;s>c;)if((o=a[c++])!=o)return!0}else for(;s>c;c++)if((e||c in a)&&a[c]===r)return e||c||0;return!e&&-1}},ss={includes:as(!0),indexOf:as(!1)},cs={},us=ss.indexOf,ls=Qi([].push),ps=function(e,t){var r,n=aa(e),o=0,i=[];for(r in n)!ha(cs,r)&&ha(n,r)&&ls(i,r);for(;t.length>o;)ha(n,r=t[o++])&&(~us(i,r)||ls(i,r));return i},fs=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ds=Object.keys||function(e){return ps(e,fs)},hs=qa?Object.defineProperties:function(e,t){$a(e);for(var r,n=aa(t),o=ds(t),i=o.length,a=0;i>a;)Za.f(e,r=o[a++],n[r]);return e},gs=wa("document","documentElement"),ms=la("keys"),vs=function(e){return ms[e]||(ms[e]=ya(e))},ys=vs("IE_PROTO"),_s=function(){},ws=function(e){return"<script>"+e+"<\/script>"},bs=function(e){e.write(ws("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ss=function(){try{Ia=new ActiveXObject("htmlfile")}catch(e){}var e,t;Ss="undefined"!=typeof document?document.domain&&Ia?bs(Ia):((t=zi("iframe")).style.display="none",gs.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ws("document.F=Object")),e.close(),e.F):bs(Ia);for(var r=fs.length;r--;)delete Ss.prototype[fs[r]];return Ss()};cs[ys]=!0;var Os=Object.create||function(e,t){var r;return null!==e?(_s.prototype=$a(e),r=new _s,_s.prototype=null,r[ys]=e):r=Ss(),void 0===t?r:hs(r,t)},ks=Da("unscopables"),js=Array.prototype;null==js[ks]&&Za.f(js,ks,{configurable:!0,value:Os(null)});var Is=function(e){js[ks][e]=!0},Ps={},xs=Qi(Function.toString);Ni(ua.inspectSource)||(ua.inspectSource=function(e){return xs(e)});var Ls,Rs,As,Es=ua.inspectSource,Ts=$i.WeakMap,Ds=Ni(Ts)&&/native code/.test(Es(Ts)),Us=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Cs=qa?function(e,t,r){return Za.f(e,t,Us(1,r))}:function(e,t,r){return e[t]=r,e},$s=$i.TypeError;if(Ds||ua.state){var qs=ua.state||(ua.state=new(0,$i.WeakMap)),Ns=Qi(qs.get),Ms=Qi(qs.has),Fs=Qi(qs.set);Ls=function(e,t){if(Ms(qs,e))throw new $s("Object already initialized");return t.facade=e,Fs(qs,e,t),t},Rs=function(e){return Ns(qs,e)||{}},As=function(e){return Ms(qs,e)}}else{var Bs=vs("state");cs[Bs]=!0,Ls=function(e,t){if(ha(e,Bs))throw new $s("Object already initialized");return t.facade=e,Cs(e,Bs,t),t},Rs=function(e){return ha(e,Bs)?e[Bs]:{}},As=function(e){return ha(e,Bs)}}var zs,Hs,Ws,Js={set:Ls,get:Rs,has:As,enforce:function(e){return As(e)?Rs(e):Ls(e,{})},getterFor:function(e){return function(t){var r;if(!Mi(t)||(r=Rs(t)).type!==e)throw $s("Incompatible receiver, "+e+" required");return r}}},Gs={}.propertyIsEnumerable,Xs=Object.getOwnPropertyDescriptor,Vs={f:Xs&&!Gs.call({1:2},1)?function(e){var t=Xs(this,e);return!!t&&t.enumerable}:Gs},Ys=Object.getOwnPropertyDescriptor,Qs={f:qa?Ys:function(e,t){if(e=aa(e),t=Ya(t),Na)try{return Ys(e,t)}catch(e){}if(ha(e,t))return Us(!Fa(Vs.f,e,t),e[t])}},Ks=Function.prototype,Zs=qa&&Object.getOwnPropertyDescriptor,ec=ha(Ks,"name"),tc={EXISTS:ec,PROPER:ec&&"something"===function(){}.name,CONFIGURABLE:ec&&(!qa||qa&&Zs(Ks,"name").configurable)},rc=f(function(e){var t=tc.CONFIGURABLE,r=Js.get,n=Js.enforce,o=String(String).split("String");(e.exports=function(e,r,i,a){var s,c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet,p=a&&void 0!==a.name?a.name:r;Ni(i)&&("Symbol("===String(p).slice(0,7)&&(p="["+String(p).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!ha(i,"name")||t&&i.name!==p)&&Cs(i,"name",p),(s=n(i)).source||(s.source=o.join("string"==typeof p?p:""))),e!==$i?(c?!l&&e[r]&&(u=!0):delete e[r],u?e[r]=i:Cs(e,r,i)):u?e[r]=i:ca(r,i)})(Function.prototype,"toString",function(){return Ni(this)&&r(this).source||Es(this)})}),nc=fs.concat("length","prototype"),oc={f:Object.getOwnPropertyNames||function(e){return ps(e,nc)}},ic={f:Object.getOwnPropertySymbols},ac=Qi([].concat),sc=wa("Reflect","ownKeys")||function(e){var t=oc.f($a(e)),r=ic.f;return r?ac(t,r(e)):t},cc=function(e,t){for(var r=sc(t),n=Za.f,o=Qs.f,i=0;i<r.length;i++){var a=r[i];ha(e,a)||n(e,a,o(t,a))}},uc=/#|\.prototype\./,lc=function(e,t){var r=fc[pc(e)];return r==hc||r!=dc&&(Ni(t)?Ki(t):!!t)},pc=lc.normalize=function(e){return String(e).replace(uc,".").toLowerCase()},fc=lc.data={},dc=lc.NATIVE="N",hc=lc.POLYFILL="P",gc=lc,mc=Qs.f,vc=!Ki(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),yc=vs("IE_PROTO"),_c=$i.Object,wc=_c.prototype,bc=vc?_c.getPrototypeOf:function(e){var t=fa(e);if(ha(t,yc))return t[yc];var r=t.constructor;return Ni(r)&&t instanceof r?r.prototype:t instanceof _c?wc:null},Sc=Da("iterator"),Oc=!1;[].keys&&("next"in(Ws=[].keys())?(Hs=bc(bc(Ws)))!==Object.prototype&&(zs=Hs):Oc=!0);var kc=null==zs||Ki(function(){var e={};return zs[Sc].call(e)!==e});kc&&(zs={}),Ni(zs[Sc])||rc(zs,Sc,function(){return this});var jc={IteratorPrototype:zs,BUGGY_SAFARI_ITERATORS:Oc},Ic=Za.f,Pc=Da("toStringTag"),xc=function(e,t,r){e&&!ha(e=r?e:e.prototype,Pc)&&Ic(e,Pc,{configurable:!0,value:t})},Lc=jc.IteratorPrototype,Rc=function(){return this},Ac=$i.String,Ec=$i.TypeError,Tc=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Qi(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return $a(r),function(e){if("object"==typeof e||Ni(e))return e;throw Ec("Can't set "+Ac(e)+" as a prototype")}(n),t?e(r,n):r.__proto__=n,r}}():void 0),Dc=tc.PROPER,Uc=tc.CONFIGURABLE,Cc=jc.IteratorPrototype,$c=jc.BUGGY_SAFARI_ITERATORS,qc=Da("iterator"),Nc=function(){return this},Mc=Js.set,Fc=Js.getterFor("Array Iterator"),Bc=function(e,t,r,n,o,i,a){!function(e,t,r,n){var o="Array Iterator";e.prototype=Os(Lc,{next:Us(1,function(){var e=Fc(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}})}),xc(e,o,!1),Ps[o]=Rc}(r);var s,c,u,l=function(e){if(e===o&&h)return h;if(!$c&&e in f)return f[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},p=!1,f=e.prototype,d=f[qc]||f["@@iterator"]||f.values,h=!$c&&d||l(o),g=f.entries||d;if(g&&(s=bc(g.call(new e)))!==Object.prototype&&s.next&&(bc(s)!==Cc&&(Tc?Tc(s,Cc):Ni(s[qc])||rc(s,qc,Nc)),xc(s,"Array Iterator",!0)),Dc&&d&&"values"!==d.name&&(Uc?Cs(f,"name","values"):(p=!0,h=function(){return Fa(d,this)})),void(c={values:l("values"),keys:l("keys"),entries:l("entries")}))for(u in c)($c||p||!(u in f))&&rc(f,u,c[u]);else!function(e,t){var r,n,o,i,a,s=e.target,c=e.global,u=e.stat;if(r=c?$i:u?$i[s]||ca(s,{}):($i[s]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(a=mc(r,n))&&a.value:r[n],!gc(c?n:s+(u?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;cc(i,o)}(e.sham||o&&o.sham)&&Cs(i,"sham",!0),rc(r,n,i,e)}}({target:"Array",proto:!0,forced:$c||p},c);return f[qc]!==h&&rc(f,qc,h,{name:o}),Ps.Array=h,c}(Array,0,function(e,t){Mc(this,{type:"Array Iterator",target:aa(e),index:0,kind:t})},0,"values");Ps.Arguments=Ps.Array,Is("keys"),Is("values"),Is("entries");var zc=Da("iterator"),Hc=Da("toStringTag"),Wc=Bc.values,Jc=function(e,t){if(e){if(e[zc]!==Wc)try{Cs(e,zc,Wc)}catch(t){e[zc]=Wc}if(e[Hc]||Cs(e,Hc,t),qi[t])for(var r in Bc)if(e[r]!==Bc[r])try{Cs(e,r,Bc[r])}catch(t){e[r]=Bc[r]}}};for(var Gc in qi)Jc($i[Gc]&&$i[Gc].prototype,Gc);Jc(Ji,"DOMTokenList");const Xc=e=>new Promise(t=>setTimeout(t,e)),Vc=()=>{var e,t,r;return(null==(e=window.__NEXT_DATA__)||null==(t=e.props)||null==(r=t.initialState)?void 0:r.webSetting)||window.setting},Yc=location.search.includes("test_preview="),Qc=["localhost","127.0.0.1",".alpha.stylewe.com","harbor.test","piepoch.com","cmall-front-alpha."].some(e=>window.location.hostname.includes(e))||Yc,Kc=(e,t)=>Math.floor(Math.random()*(t-e)+e),Zc=[];for(let e=48;e<=57;e++)Zc.push(String.fromCharCode(e));for(let e=97;e<=122;e++)Zc.push(String.fromCharCode(e));for(let e=65;e<=90;e++)Zc.push(String.fromCharCode(e));const eu=(e,t)=>{const r=t.endsWith("/")&&"/"!==t?t.slice(0,-1):t;if(e===r)return!0;const n=e.split("/"),o=r.split("/");return n.length===o.length&&n.every((e,t)=>e.startsWith(":")||e===o[t])},tu=(e,t)=>{let r=e;if(r){if(r.endsWith("_result"))return r;if(r.startsWith("slide_"))return r;if(r.startsWith("triger_"))return r;"behavior"===t?r=`click_${r}`:"impression"===t&&(r=`impression_${r}`)}return r},ru=new RegExp("(iPhone|Android|iphone| Android 9 |Android 10|Android 11|iPhone OS|Mobile)","i"),nu=()=>{if(window.flutter_inappwebview){var e,t;const r=null==(e=Ai.get("platform_appVersion"))?void 0:e.includes("android"),n=null==(t=Ai.get("platform_appVersion"))?void 0:t.includes("ios");return r?"app_android":n?"app_ios":"app"}return ru.test(navigator.userAgent)?window.matchMedia("(min-width: 641px)").matches?"web_tablet":"web_mobile":"web_pc"},ou=e=>{console.error("-----------自埋点报错-----------",e)},iu=e=>{const t=e.slice(e.startsWith("?")?1:0);return t.length?t.split("&").reduce((e,t)=>{const r={...e},[n,o=""]=t.split("=");return r[n]=o,r},{}):{}};let au,su=!1;const cu=()=>{au=null,Ai.remove("mirage_ad")};let uu,lu=!1;const pu=()=>{uu=null,Ai.remove("mirage_utm")},fu={prev:"",current:""};sessionStorage.getItem("mirage_tab")||sessionStorage.setItem("mirage_tab",`${(new Date).toISOString()}@${String(Math.random()).slice(2,6)}`);const du=e=>new Li(e,window.location.href).href,hu=performance.getEntriesByType("navigation")[0],gu=hu?hu.type:{0:"navigate",1:"reload",2:"back_forward",255:"reserved"}[performance.navigation.type],mu="reload"===gu,vu=e=>{const t="/checkout/success"===location.href;return!(!e&&t||"navigate"!==gu||document.referrer.startsWith(location.origin)||(e?[]:["paypal.com"]).some(e=>document.referrer.includes(e)))},yu=()=>{if(vu(!0))fu.prev=window.document.referrer;else{const e=JSON.parse(sessionStorage.getItem("mirage_rfr")||"{}");fu.prev=(mu?e.prev:e.current)||window.document.referrer}_u(window.location.href);const e=window.history.pushState;window.history.pushState=function(...t){const r=du(t[2]);return _u(r),Eu("pushState",r),e.apply(this,t)};const t=window.history.replaceState;window.history.replaceState=function(...e){const r=du(e[2]);return _u(r),Eu("replaceState",r),t.apply(this,e)},window.addEventListener("popstate",()=>{_u(window.location.href),Eu("popstate")})},_u=e=>{(()=>{try{const{search:e}=window.location,t=iu(e);t.utm_source||t.utm_code||t.creative?(e=>{uu=e,Ai.set("mirage_utm",JSON.stringify(e))})({searchParams:t,visitedTime:Date.now()}):!lu&&vu()&&pu(),lu=!0}catch(e){Cl({event_type:"error",message:e})}})(),(()=>{try{const{search:e}=window.location,t=iu(e);t.ad_id||t.creative?(e=>{au=e,Ai.set("mirage_ad",JSON.stringify(e))})({searchParams:t,visitedTime:Date.now()}):!su&&vu()&&cu(),su=!0}catch(e){Cl({event_type:"error",message:e})}})(),(e=>fu.current!==e)(e)&&(fu.current&&(fu.prev=fu.current),fu.current=e,sessionStorage.setItem("mirage_rfr",JSON.stringify(fu)))},wu=()=>fu,bu=e=>{let t=localStorage.getItem("mirage_searchid")||Ai.get("mirage_searchid");if(!t||e){const e=Date.now();t=`${Math.random().toString(36).substr(2,10)}.${e.toString().substr(0,10)}`}return localStorage.setItem("mirage_searchid",t),Ai.set("mirage_searchid",t,{expires:365}),t},Su={},Ou=e=>["trending_word","btn_search","recent_word"].includes(e),ku=()=>location.pathname+location.search,ju=e=>{sessionStorage.setItem("mirage_attribution",JSON.stringify(null!=e?e:Au()))},Iu=()=>{const e=sessionStorage.getItem("mirage_attribution");return JSON.parse(e)||Au()},Pu=()=>{let e=Object.entries(r).find(e=>eu(e[0],location.pathname));return e?e[1][0]:""},xu=e=>{e.indexOf("?")>-1&&(e=e.split("?")[0]);let t=Object.entries(r).find(t=>eu(t[0],e));return t?t[1][1]:""},Lu=({pathData:e,pageName:t,condition:r})=>{var n;if("string"==typeof t&&(null==e?void 0:e.pathName)!==t)return;if("function"==typeof t&&!t(null==e?void 0:e.pathName))return;if(null==(n=e.data)||!n.length)return;const o=e.data[e.data.length-1];return o&&("function"!=typeof r||r(o))?(o.page_id=xu(e.path),o):void 0},Ru=e=>{try{const t=(e=>{const{event_id:t,page_id:r,page_module:n}=e;if(!["add_to_cart","add_to_cart_result","buy_it_now"].includes(t))return;if("page_product_detail"===r&&!n)return;const o=window.sessionStorage.getItem("mirage_attribution_last_btn_quick_shop");if(!o)return;const i=JSON.parse(o),{object_id:a,object_type:s,rank:c,collection_id:u,page_module_title:l,recommend_type:p,params:f,alg_id:d,attribution_token:h}=i.data,g={event_id:"click_btn_quick_shop",object_id:a,object_type:s,page_id:r,page_module:n,rank:c,collection_id:u||f.collection_id,page_module_title:l||f.page_module_title,recommend_type:p||f.recommend_type,alg_id:d||f.alg_id,attribution_token:h||f.attribution_token};return{pp:g,ff:"page_home"===r?g:void 0}})(e)||{},r=(()=>{var e;if("首页"===Pu())return;const t=Iu(),{pathIndex:r,pathData:n}=t;return(null==(e=n[r])?void 0:e.ff)||void 0})(),n=(()=>{var e;const t=Iu(),{pathIndex:r,pathData:n}=t;return(null==(e=n[r])?void 0:e.pp)||void 0})();return{ff:t.ff||r,pp:t.pp||n}}catch(e){Cl({event_type:"error",message:e})}},Au=()=>({pathIndex:0,pathData:[{path:ku()}]}),Eu=(e,t=ku())=>{try{const s=Iu();let c=t;c.startsWith(location.origin)&&(c=c.slice(location.origin.length)),s.lastNavigateAction=e;const u=s.pathIndex;var r;if(["pushState","navigate"].includes(e)){if((null==(r=s.pathData[s.pathIndex])?void 0:r.path)!==c&&(s.pathIndex++,s.pathData[s.pathIndex]={path:c,time:(new Date).getTime()}),s.pathData=s.pathData.slice(0,s.pathIndex+1),s.pathData.length>50){var n;const e=s.pathData[0];if(null!=(n=e.data)&&n.length){null!=s.shelfData||(s.shelfData=[]);const t=s.shelfData.find(t=>t.path===e.path);-1!==t&&s.shelfData.splice(t,1);const r=e.path.split("?")[0];s.shelfData.push({path:r,data:e.data,time:e.time})}s.pathData=s.pathData.slice(1),s.pathIndex--}}else if(["popstate","back_forward"].includes(e)){var o,i;if((null==(o=s.pathData[u+1])?void 0:o.path)===c)s.pathIndex++;else if((null==(i=s.pathData[u-1])?void 0:i.path)===c)s.pathIndex--;else if(u>1){const e=s.pathData.slice(0,u-1).findLastIndex(e=>e.path===c);-1!==e&&(s.pathIndex=e)}}else if("replaceState"===e){var a;(null==(a=s.pathData[s.pathIndex-1])?void 0:a.path)===c||s.pathData[s.pathIndex].path===c||(s.pathData[s.pathIndex]={path:c,time:(new Date).getTime()},s.pathData=s.pathData.slice(0,s.pathIndex+1))}const l=s.pathData[s.pathIndex];if(void 0===l.ff&&s.pathIndex>0){const e=s.pathData[s.pathIndex-1],t=(e=>{const t=Lu({pathData:e,pageName:()=>!0,condition(e){const{event_type:t,event_id:r}=e;return!("behavior"!==t||!Ou(r))}}),r=Lu({pathData:e,pageName:"首页"});if(t){const{nav_name:e,event_id:r,event_type:n,page_id:o}=t;let i=t.search_type,a=tu(r,n);return"click_trending_word"==a?i="热词":"click_recent_word"==a&&(i="最近搜索词"),{event_id:a,object_type:"keyword",object_id:e,page_id:o,search_id:bu(),search_type:i}}if(r){var n,o;const{event_type:e,event_id:t,page_module:i,module_rank:a,rank:s,product_id:c,product:u,adv:l,nav_id:p,nav_name:f,url:d,page_module_title:h,alg_id:g,alg_type:m,page_id:v,attribution_token:y}=r;let _,w=tu(t,e),b="无推荐";return"byte"===m?b="字节元推荐":g&&(b="AWS推荐"),l?_="advertise":u?_="product":p&&(_="nav"),{object_type:_,event_id:w,object_id:null!=(n=null!=(o=null!=c?c:u)?o:l)?n:f,module_rank:a,rank:s,page_module:i,url:d,page_module_title:h,page_id:v,alg_id:g,attribution_token:y,recommend_type:b}}if(e.ff)return e.ff})(e)||null,r=(e=>{const t=Lu({pathData:e,pageName:e=>"首页"!==e,condition(e){const{event_type:t,event_id:r}=e;return"product"===r&&"behavior"===t}});if(t){const{event_type:e,event_id:r,page_module:n,page_module_title:o,page_module_title_new:i,collection_id:a,rank:s,product:c,alg_id:u,attribution_token:l,page_id:p}=t;return{event_id:tu(r,e),object_id:c,object_type:"product",rank:s,page_module:n,page_module_title:null!=o?o:i,collection_id:a,page_id:p,recommend_type:u?"AWS推荐":"无推荐",alg_id:u,attribution_token:l}}if(e.pp)return e.pp})(e)||null;l.ff=t,l.pp=r}ju(s)}catch(e){Cl({event_type:"error",message:e})}};function Tu(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Uu(e,t,"get"))}function Du(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Uu(e,t,"set"),r),r}function Uu(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Cu(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function $u(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qu(e,t,r){$u(e,t),t.set(e,r)}function Nu(e,t){$u(e,t),t.add(e)}Is("flat");var Mu=[" daum[\\s/]"," deusu/","(?:^|\\s)site","@[a-z]","\\(at\\)[a-z]","\\(github\\.com/","\\[at\\][a-z]","^12345","^<","^[\\w\\s\\.]+/v?\\d+(\\.\\d+)?(\\.\\d{1,10})?$","^[\\w]+$","^ace explorer","^acoon","^active","^ad muncher","^anglesharp/","^anonymous","^apple-pubsub/","^astute srm","^avsdevicesdk/","^axios/","^bidtellect/","^biglotron","^blackboard safeassign","^blocknote.net","^braze sender","^captivenetworksupport","^castro","^cf-uc ","^clamav[\\s/]","^cobweb/","^coccoc","^dap ","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^email","^enigma browser","^evernote clip resolver","^facebook","^faraday","^fdm[\\s/]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^infox-wisg","^invision","^jeode/","^jetbrains","^jetty/","^jigsaw","^linkdex","^lwp[-:\\s]","^mailchimp\\.com$","^metauri","^microsoft bits","^microsoft data","^microsoft office existence","^microsoft office protocol discovery","^microsoft windows network diagnostics","^microsoft-cryptoapi","^microsoft-webdav-miniredir","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^my browser$","^navermailapp","^netsurf","^node-superagent","^octopus","^offline explorer","^pagething","^panscient","^perimeterx","^php","^postman","^postrank","^python","^read","^reed","^request-promise$","^restsharp/","^shareaza","^shockwave flash","^snapchat","^space bison","^sprinklr","^svn","^swcd ","^t-online browser","^taringa","^test certificate info","^the knowledge ai","^thinklab","^thumbor/","^traackr.com","^tumblr/","^vbulletin","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^www-mechanize","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zeushdthree","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","bot","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","client","cloud","crawl","daemon","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","fetch","firephp","freesafeip","ghost","gomezagent","google","headlesschrome/","http","httrack","hubspot marketing grader","hydra","ibisbrowser","images","index","ips-agent","java","jorgee","library","mail\\.ru/","manager","monitor","morningscore/","neustar wpm","news","nutch","offbyone","optimize","pagespeed","parse","perl","phantom","pingdom","powermarks","preview","probe","proxy","ptst[\\s/]\\d","reader","rexx;","rigor","rss","scan","scrape","search","server","sogou","sparkler/","spider","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","taginspector/","toolbar","torrent","tracemyfile","transcoder","trendsmapresolver","twingly recon","url","valid","virtuoso","wappalyzer","webglance","webkit2png","websitemetadataretriever","whatcms/","wordpress","zgrab"];!function(e){try{new RegExp("(?<! cu)bot").test("dangerbot")}catch(t){return e}e.splice(e.lastIndexOf("bot"),1),e.push("(?<! cu)bot"),e.splice(e.lastIndexOf("google"),1),e.push("(?<! (channel\\/|google\\/))google(?!(app|\\/google))"),e.splice(e.lastIndexOf("search"),1),e.push("(?<! (ya|yandex))search"),e.splice(e.lastIndexOf("http"),1),e.push("(?<!(lib))http"),e.splice(e.lastIndexOf("java"),1),e.push("java(?!;)"),e.splice(e.lastIndexOf("fetch"),1),e.push("(?<!(mozac))fetch")}(Mu);var Fu=new WeakMap,Bu=new WeakMap,zu=new WeakSet,Hu=new WeakSet,Wu=function(){function e(t){var r=this;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Nu(this,Hu),Nu(this,zu),qu(this,Fu,{writable:!0,value:void 0}),qu(this,Bu,{writable:!0,value:void 0}),Du(this,Fu,t||Mu.slice()),Cu(this,zu,Ju).call(this),Object.defineProperties(function(e){return r.test(e)},Object.getOwnPropertyNames(e.prototype).filter(function(e){return!["constructor"].includes(e)}).reduce(function(e,t){return Object.assign(e,(i={get:function(){return r[t].bind(r)}},(o=t)in(n={})?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,n));var n,o,i},{}))}var t,r;return t=e,r=[{key:"test",value:function(e){return Boolean(e)&&Tu(this,Bu).test(e)}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(Tu(this,Bu));return t&&t[0]}},{key:"matches",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Tu(this,Fu).filter(function(t){return new RegExp(t,"i").test(e)})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.exclude(this.matches(e))}},{key:"extend",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];[].push.apply(Tu(this,Fu),t.filter(function(t){return-1===Cu(e,Hu,Gu).call(e,t)}).map(function(e){return e.toLowerCase()})),Cu(this,zu,Ju).call(this)}},{key:"exclude",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length;t--;){var r=Cu(this,Hu,Gu).call(this,e[t]);r>-1&&Tu(this,Fu).splice(r,1)}Cu(this,zu,Ju).call(this)}},{key:"spawn",value:function(t){return new e(t||Tu(this,Fu))}}],r&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ju(){Du(this,Bu,new RegExp(Tu(this,Fu).join("|"),"i"))}function Gu(e){return Tu(this,Fu).indexOf(e.toLowerCase())}var Xu=new Wu;let Vu,Yu=0;const Qu=[["third_category","order","keyword","flash","activity","adv"],["product","sku"],["url","address","coupon"]],Ku="web_pc"===nu(),Zu=`${Qc?"https://jingwei-cozy-test.chicv.com":"https://jingwei.harborcdn.com"}${"/v1/dot/topic/bury-log-"+(Ku?"web":"m")}`,el=async e=>{let t=e;try{var r;const n=null!=(r=await(null==window.collectDataCallBack?void 0:window.collectDataCallBack(e)))?r:{};if(n.skipUpload)return;n.data&&(t=n.data)}catch(e){ou(e)}const n=JSON.stringify(t);if(!navigator.sendBeacon||!navigator.sendBeacon(Zu,n))if(fetch)fetch(Zu,{method:"POST",body:n,keepalive:!0});else{const e=new XMLHttpRequest;e.open("post",Zu,!0),e.send(n),el.hasBlock||window.addEventListener("unload",()=>{},!1),el.hasBlock=!0}};var tl=()=>{if(window.addEventListener("unhandledrejection",function(e){Cl({event_type:"error",message:e.reason,type:"promise-unhandledrejection"})}),window.addEventListener("error",e=>{Cl(e.message?{event_type:"error",message:e.error,type:"synchronous-code"}:{event_type:"error",message:`request fail ${e.target.tagName} ${e.target.src||e.target.href}`,type:"resource-request"})},!0),!(location.hostname.split(".").length>2)||Qc){if(window.XMLHttpRequest){class e extends XMLHttpRequest{constructor(){super(),this.addEventListener("loadend",e=>{null!=this._request||(this._request={});const t=e.target.responseURL||this._request.url,r=e.target.status||this._request.status;t&&(r>=200&&r<300||304===r||t===Zu||Cl({event_type:"error",message:`${this._request.method} ${t} ${r}`,type:"XMLHttpRequest"}))})}open(...e){super.open(...e),this._request={method:e[0],url:e[1]}}}window.XMLHttpRequest=e}if(window.fetch){var e=window.fetch;const t=e=>"Request"in window&&e[0]instanceof Request&&e[0].method?e[0].method:e[1]&&e[1].method?e[1].method:"get",r=e=>"string"==typeof e[0]?e[0]:"Request"in window&&e[0]instanceof Request?e[0].url:String(e[0]);window.fetch=function(...n){const o=t(n),i=r(n);return e.apply(this,n).then(e=>(e.status>=200&&e.status<300||304===e.status||i===Zu||Cl({event_type:"error",message:`${o} ${i} ${e.status}`,type:"fetch"}),e),e=>{throw Cl({event_type:"error",message:`${o} ${i}`,type:"fetch"}),e})}}}},rl=G("match"),nl=Math.floor,ol=s("".charAt),il=s("".replace),al=s("".slice),sl=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,cl=/\$([$&'`]|\d{1,2})/g,ul=function(e,t,r,n,o,i){var a=r+e.length,s=n.length,c=cl;return void 0!==o&&(o=O(o),c=sl),il(i,c,function(i,c){var u;switch(ol(c,0)){case"$":return"$";case"&":return e;case"`":return al(t,0,r);case"'":return al(t,a);case"<":u=o[al(c,1,-1)];break;default:var l=+c;if(0===l)return i;if(l>s){var p=nl(l/10);return 0===p?i:p<=s?void 0===n[p-1]?ol(c,1):n[p-1]+ol(c,1):i}u=n[l-1]}return void 0===u?"":u})},ll=G("replace"),pl=RegExp.prototype,fl=m.TypeError,dl=s(function(){var e=je(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}),hl=s("".indexOf),gl=s("".replace),ml=s("".slice),vl=Math.max,yl=function(e,t,r){return r>e.length?-1:""===t?r:hl(e,t,r)};It({target:"String",proto:!0},{replaceAll:function(e,t){var r,n,o,i,a,s,c,u,l,p,f,d=b(this),h=0,g=0,m="";if(null!=e){if((r=ve(p=e)&&(void 0!==(f=p[rl])?!!f:"RegExp"==K(p)))&&(n=oe(b("flags"in pl?e.flags:dl(e))),!~hl(n,"g")))throw fl("`.replaceAll` does not allow non-global regexes");if(o=Ue(e,ll))return Pe(o,e,d,t);if(r)return gl(oe(d),e,t)}for(i=oe(d),a=oe(e),(s=A(t))||(t=oe(t)),u=vl(1,c=a.length),h=yl(i,a,0);-1!==h;)l=s?oe(t(a,h,i)):ul(a,i,h,[],void 0,t),m+=ml(i,g,h)+l,g=h+c,h=yl(i,a,h+u);return g<i.length&&(m+=ml(i,g)),m}});var _l=R.StringPrototype.replaceAll,wl=String.prototype,bl=function(e){var t=e.replaceAll;return"string"==typeof e||e===wl||xe(wl,e)&&t===wl.replaceAll?_l:t};const Sl="data-collect",Ol="data-collect-impression";let kl=!0,jl=[],Il=[];const Pl=[{selector:".stream-subscribe-component",selectorAttr:Ol,data:{event_id:"pop_ups"}},{selector:".stream-subscribe-component .close-btn",selectorAttr:"data-collect-click",data:{event_id:"delete_pop_ups"}},{selector:".stream-subscribe-component .email-input",selectorAttr:"data-collect-click",data:{event_id:"input_pop_ups"}},{selector:".stream-subscribe-component .stream-subscribe-button",selectorAttr:"data-collect-click",data:{event_id:"pop_ups"}}],xl=e=>e&&"{}"!==e&&e.startsWith("{"),Ll=e=>{const t=((e,t,r=!1)=>{const{top:n,left:o,bottom:i,right:a}=e.getBoundingClientRect();let s,c,u,l;if(t){const e=t.getBoundingClientRect();s=e.top,c=e.left,u=e.bottom,l=e.right}else s=0,c=0,u=window.innerHeight,l=window.innerWidth;const p=r?(n>=s&&n<=u||i>=s&&i<=u)&&(o>=c&&o<=l||a>=c&&a<=l):n>=s&&o>=c&&i<=u&&a<=l;if(p){const t=window.getComputedStyle(e);return!("0"===t.opacity||"none"===t.display||"hidden"===t.visibility)}return p})(e,null,!0),r=e.getBoundingClientRect();return t&&r.height>0&&(e=>{var t;const r=e.getBoundingClientRect();let{left:n,right:o}=r,i=r.bottom>window.innerHeight&&r.top<window.innerHeight?window.innerHeight:r.bottom;const a=document.elementFromPoint((n+o)/2,((r.bottom>0&&r.top<0?0:r.top)+i)/2);return a===e||e.contains(a)||(null==a||null==(t=a.classList)?void 0:t.contains("swiper-wrapper"))})(e)},Rl=()=>{if(kl)return;const e=window.collectDataStorage?[...window.collectDataStorage.entries()].filter(([e,t])=>e.current&&[Sl,Ol].includes(t.type)):[],t=e.map(([e])=>e.current),r=[...Array.from(document.querySelectorAll(`[${Ol}]`)),...Array.from(document.querySelectorAll(`[${Sl}]`)),...t];Pl.forEach(e=>{const t=(e=>{const{selector:t,data:r,selectorAttr:n=Sl}=e,o=document.querySelector(t);if(o){if(!o.getAttribute(n)){const e="function"==typeof r?r():r;o.setAttribute(n,JSON.stringify(e))}return o}})(e);t&&r.push(t)}),r.forEach(t=>{let r=t.getAttribute(Ol)||t.getAttribute(Sl);if(!r){const n=e.find(([e])=>e.current===t);if(n)try{const e=n[1].callback();r=JSON.stringify(e)}catch(e){window.collectDataStorage.delete(n[0]),Cl({event_type:"error",message:e})}}xl(r)&&!Il.includes(r)&&!jl.some(e=>e.dataSource===r)&&Ll(t)&&(jl.push({startTime:Date.now(),dom:t,dataSource:r}),Al())})},Al=(()=>{let e,t=0;return()=>{const r=Date.now()+600;t<r&&(t=r),e||(e=setInterval(()=>{const r=Date.now(),n=[];for(let e=jl.length-1;e>=0;e--){const t=jl[e];Ll(t.dom)?r-t.startTime>600&&(jl.splice(e,1),Il.push(t.dataSource),n.push(t)):jl.splice(e,1)}(e=>{if(!e.length)return;const t=e.map(e=>JSON.parse(e.dataSource)),r={};t.sort((e,t)=>e.rank-t.rank).forEach(e=>{const t=`${e.event_id}/${e.page_module}`;r[t]||(r[t]=[]),r[t].push(e)}),Object.values(r).forEach(e=>{const t=e.map(({event_id:e,page_module:t,...r})=>r),{event_id:r,page_module:n,item_list_id:o,item_list_name:i}=e[0];Cl({event_type:"impression",event_id:r,page_module:n,items:t},()=>{"function"==typeof window.viewItemList&&("product"===r||"advertise"===r&&["product_recommend"].includes(n))&&window.viewItemList({item_list_id:o||localStorage.getItem("last_view_item_list_id")||"",item_list_name:i||localStorage.getItem("last_view_item_list_name")||"",items:t})})})})(n),r>t&&(clearInterval(e),e=null)},100))}})(),El=(()=>{let e,t=0;return()=>{const r=Date.now()+5e3;t<r&&(t=r),e||(Rl(),e=setInterval(()=>{Date.now()>t?(clearInterval(e),e=null):Rl()},100))}})(),Tl=(e,t,r)=>{let n=e.getAttribute(t);const o=window.collectDataStorage?[...window.collectDataStorage.entries()].filter(([e,r])=>e.current&&r.type===t):[];if(!n){const t=o.find(([t])=>t.current===e);if(t)try{const e=t[1].callback();n=JSON.stringify(e)}catch(e){Cl({event_type:"error",message:e})}}if(xl(n)){const e=JSON.parse(n);Cl({event_type:"behavior",...e})}const i=e.closest(`[${t}]`);i&&e!==i&&Tl(i,t),r&&o.forEach(([r])=>{r.current!==e&&r.current.contains(e)&&Tl(r.current,t)})};let Dl=!1,Ul="";const Cl=async(e,t)=>{try{for(;!Dl;)await Xc(100);const c="function"==typeof e?await e():e,{event_type:u}=c;if("page"===u){if(c.url||(c.url=window.location.href),c.url===Ul)return;Ul=c.url,kl=!0,Il=[],jl=[],_u(c.url),setTimeout(()=>{kl=!1,El()},1e3)}else if("behavior"===u);else if("impression"===u);else if("monitor"===u);else if("error"!==u)return void ou("请输入有效的 event_type 字段");if("error"===u)return;const l=(e=>{const{url:t,event_type:n,ext_info:o,params:i,event_id:a,page_module:s,rank:c,module_rank:u,items:l,...p}=e;(e=>{const{event_id:t,event_type:r}=e;if("behavior"===r&&!t)throw new Error("行为埋点需要添加 event_id 字段");if("impression"===r&&!t)throw new Error("曝光埋点需要添加 event_id 字段");t&&["click_","impression_"].forEach(e=>{if(t.startsWith(e))throw new Error(`event_id 不需要添加 ${e}`)})})(e);let f=tu(a,n);const d=(()=>{let e="";for(let t=0;t<32;t++){const t=Kc(0,Zc.length);e+=Zc[t]}return e})(),h=++Yu,g=Date.now(),m=wu(),v="page"!==n?t:void 0,y=("page"===n?t:void 0)||m.current||window.location.href,_=(e=>{var t,r,n,o,i,a;const s=window.location.hostname,c=wu().prev||window.document.referrer,u=window.navigator.language,l=(()=>{var e;const t=Ai.get("userInfo")||localStorage.getItem("userInfo")||"{}";return null!=(e=JSON.parse(decodeURIComponent(t)).id)?e:""})(),p=(()=>{let e=localStorage.getItem(Ei)||Ai.get(Ei);return e||(e=`${Math.random().toString(36).substr(2,10)}.${Date.now().toString().substr(0,10)}`),localStorage.setItem(Ei,e),Ai.set(Ei,e,{expires:365}),e})(),f=(()=>{const e=[JSON.parse(Ai.get(Ti)||"{}"),JSON.parse(localStorage.getItem(Ti)||"{}"),JSON.parse(sessionStorage.getItem(Ti)||"{}"),Su[Ti]||{}].sort((e,t)=>{var r,n;return(null!=(r=t.timestamp)?r:0)-(null!=(n=e.timestamp)?n:0)})[0],t=e.timestamp;let r,n;if(t){const n=new Date,o=new Date(t),i=n.getTime()-t>18e5,a=n.getUTCHours()!==o.getUTCHours()&&n.getUTCHours()+8===24;i||a||(r=e.sid)}if(!r){const e=Date.now();r=`${Math.random().toString(36).substr(2,10)}.${e.toString().substr(0,10)}`,n=e}return(e=>{const t=JSON.stringify(e);localStorage.setItem(Ti,t),Ai.set(Ti,t,{expires:1}),sessionStorage.setItem(Ti,t),Su[Ti]=e})({sid:r,timestamp:Date.now()}),{sid:r,sessionTime:n}})(),d=f.sid,h=f.sessionTime,{order_prefix:g="hb",ace_store_id:m,currency_code:v}=Vc(),y=`${g.toLowerCase()}${m}`,_=nu(),w=(new Date).getTimezoneOffset(),b=`${w>0?"-":"+"}${Math.abs(w)}`,S=Ai.get("currency")||v||"USD",O=JSON.parse(Ai.get("x-default-country")||"{}"),{value:k="",city:j=""}=O,I=(()=>{try{const e=uu||JSON.parse(Ai.get("mirage_utm")||"{}");return e.visitedTime?Date.now()-e.visitedTime>18e5?(pu(),{}):e.searchParams||{}:{}}catch(e){return Cl({event_type:"error",message:e}),{}}})(),{utm_source:P="",utm_code:x="",creative:L=""}=I,{ad_id:R="",creative:A=""}=(()=>{try{const e=au||JSON.parse(Ai.get("mirage_ad")||"{}");return e.visitedTime?Date.now()-e.visitedTime>18e5?(cu(),{}):e.searchParams||{}:{}}catch(e){return Cl({event_type:"error",message:e}),{}}})(),E=R||A,T=localStorage.getItem("sh_userEmail")||Ai.get("subscribe-email"),D=null!=(t=Ai.get("epm_variation_v2"))?t:"",[U="",C=""]=D.split(":"),$=null!=(r=Ai.get("test_variations"))?r:"",q={};$.split(",").forEach((e,t)=>{if(e){const[t,r]=e.split(":");q[t+""]=r}});const N=Xu(navigator.userAgent)?1:0,M=null==(n=navigator)||null==(o=n.connection)?void 0:o.effectiveType,F=document.querySelectorAll("*").length,B=`${window.screen.width}X${window.screen.height}`,z=`${window.innerWidth||document.documentElement.offsetWidth}X${window.innerHeight||document.documentElement.offsetHeight}`,H=sessionStorage.getItem("mirage_tab"),W=null!=(i=Ai.get("_ga"))?i:"",J=null!=(a=Ai.get("_gid"))?a:"";return{domain:s,url:e,refer_url:c,user_lang:u,user_id:l,cookie_id:p,session_id:d,session_time:h,site:y,app_type:_,timezone:b,currency:S,cv_chl:"",cv_ts:"",utm_source:P,utm_code:x,subscribe_email:T,ab_test_id:U,ab_test_type:C,ab_test_detail:q,bot:N,network_type:M,dom_length:F,screen_resolution:B,viewport_resolution:z,tab_id:H,city:j,country:k,advertise_track_id:L,_ga:W,_gid:J,ad_id:E}})(y),w=((e,t,n)=>{const o=(e=>{const t=e.split("#")[0],r=location.origin.length,n=t.includes("?")?t.indexOf("?"):t.length;return t.slice(r,n)})(e);let i=Object.entries(r).find(e=>eu(e[0],o));i||(i=["/undefined",["undefined","undefined"]]);const a=i[1][1],s=window.document.title;let c,u;return"page"===n?(c=`${a}_${t}`,Vu=c):c=Vu,"behavior"===n&&(u=`${a}_${t}`),{page_id:a,page_name:i[1][0],page_path:o,page_title:s,unique_page_id:c,unique_event_id:u}})(y,g,n);let b;if("impression"!==n||l){const t={url:v,...i,...p},r=null==l?void 0:l.map(e=>({...e,event_id:tu(e.event_id,n)}));b={...w,event_id:f,page_module:s,rank:c,module_rank:u,ext_info:{...Ru({...e,...w}),...o},items:r,params:t}}else b={...w,event_id:f,page_module:s,items:[{ext_info:{...Ru({...e,...w}),...o},url:v,params:i,rank:c,module_rank:u,...p}]};const S=((e,t)=>{if("page"!==t&&"behavior"!==t)return e;const r={...e},n={...r.params},o=Qu.flat(),i=Object.keys(n);let a=1;return o.forEach(e=>{if(i.includes(e)&&void 0!==n[e]){const t=1===a?"":a;r[`object_type${t}`]=e,r[`object_id${t}`]=n[e],a++,n[e]=void 0}}),{...r,params:n}})(b,n);return{trace_id:d,event_index:h,retry_times:0,log_type:"event",event_type:n,event_time:g,header:_,data:S}})(c);if("page"===l.event_type&&"page_search_product_list"===l.data.page_id){const e=window.sessionStorage.getItem("mirage_attribution_last_search");if(e){var n;const t=JSON.parse(e),r=null==(n=t.data)?void 0:n.event_id;if(r){var o,i,a,s;l.data.params.position=null==(o=t.data)||null==(i=o.params)?void 0:i.position;let e=null==(a=t.data)||null==(s=a.params)?void 0:s.search_type;"click_trending_word"===r?e="热词":"click_recent_word"==r&&(e="最近搜索词"),l.data.params.search_type=e}}}el(l),(({data:e,fullData:t})=>{try{if("btn_quick_shop"===e.event_id&&sessionStorage.setItem("mirage_attribution_last_btn_quick_shop",JSON.stringify(t)),["btn_search","recent_word","trending_word"].includes(e.event_id)&&sessionStorage.setItem("mirage_attribution_last_search",JSON.stringify(t)),"behavior"===e.event_type&&(e=>{const t=Pu();return"element"!==e.event_id&&"behavior"===e.event_type&&("首页"===t||"product"===e.event_id||!!Ou(e.event_id))})(e)){var r;const t=Iu(),n=Pu(),o=ku(),{pathData:i,pathIndex:a}=t;null!=(r=i[a]).data||(r.data=[]),i[a].pathName=n,i[a].path=o,i[a].data.push(e),i[a].data.length>3&&(i[a].data=i[a].data.slice(-3)),ju(t)}}catch(e){Cl({event_type:"error",message:e})}})({data:c,fullData:l}),t&&t()}catch(e){console.warn(e)}};(async()=>{try{for(;null==(e=Vc())||!e.ace_store_id;){var e;await Xc(100)}Dl=!0,(()=>{try{const e=Iu();vu()||!e.pathData||"number"!=typeof e.pathIndex?ju(Au()):Eu(gu)}catch(e){Cl({event_type:"error",message:e})}})(),yu(),(()=>{const e=window.collectData;Array.isArray(e)&&e.forEach(e=>{Cl(e)})})(),(()=>{document.addEventListener("click",e=>{(e=>{let t=[],r=e.target;for(;r&&r!==document.body;){var n;let e="";for(let t=1;t<100;t++)if(r.matches(`:nth-child(${t})`)){e=`:nth-child(${t})`;break}if(r.id)t.push(`#${r.id}${e}`);else if(null!=(n=r.className)&&null!=n.trim&&n.trim()){const n=r.className.split(" ").filter(e=>e.length).reduce((e,t)=>{var r;return`${e}.${bl(r=bl(t).call(t,"[","\\\\[")).call(r,"]","\\\\]")}`},"");t.push(`${n}${e}`)}else t.push(`${r.localName}${e}`);r=r.parentElement}const o=t.reverse().join(" > ");Cl({event_type:"behavior",event_id:"element",selector:o,text:e.target.textContent})})(e),Tl(e.target,"data-collect-click",!0),Tl(e.target,Sl,!0)},!0),window.addEventListener("scroll",El,{passive:!0,capture:!0});try{const e=document.body,t={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style",Sl,Ol]};new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type?e.addedNodes.length&&El():"attributes"===e.type&&El()})}).observe(e,t)}catch(e){Cl({event_type:"error",message:e}),window.addEventListener("DOMContentLoaded",El),window.addEventListener("load",El),window.addEventListener("click",()=>{setTimeout(Rl,2e3)},!0)}window.addEventListener("blur",()=>{"chat-widget"===document.activeElement.id&&Cl({event_type:"behavior",event_id:"modal_customer_service"})})})(),tl()}catch(e){Cl({event_type:"error",message:e})}})();export{Cl as push};
